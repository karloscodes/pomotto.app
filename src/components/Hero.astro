---
import { faqData } from "../data/faq";
// The FAQs in faq.ts now contain all the display data
---

<style>
 .highlight {
   position: relative;
   display: inline-block;
 }
 .highlight::before {
   content: "";
   position: absolute;
   top: 0.2em;
   left: 0;
   right: 0;
   bottom: 0.2em;
   background: #04f0f8df;
   z-index: -1;
   border-radius: 0.2em;
   transform: rotate(-2deg);
 }
</style>

<script>
 let dialog;
 document.addEventListener('DOMContentLoaded', () => {
   dialog = document.getElementById('videoDialog');
  document.querySelectorAll('.watchDemo').forEach(element => {
    element.addEventListener('click', (e) => {
     e.preventDefault();
     dialog.showModal();
    });
    });
 });

 function toggleFaq(button) {
      // Toggle the content visibility
      const content = button.nextElementSibling;
      content.classList.toggle('hidden');
      
      // Rotate the chevron
      const chevron = button.querySelector('svg');
      chevron.classList.toggle('rotate-180');
      
      // Toggle active state styling on the button
      button.classList.toggle('bg-gray-50');
    }
</script>

<section class="flex-grow flex flex-col items-center justify-center text-center md:pt-24">
 <div class="container mx-auto px-4">
   <h1 class="text-4xl sm:text-6xl font-semibold uppercase tracking-widest text-shadow">
     Pomotto
   </h1>
   <h2 class="mt-8 text-2xl text-3xl leading-8">
     A <span class="highlight">pomodoro</span> timer for the <span class="highlight">hyper-focused</span>
   </h2>
   <h2 class="mb-8 text-2xl text-xl leading-8">
     Harness your <span class="highlight">laser-sharp focus</span> and <span class="highlight">sustain energy</span> throughout the day
   </h2>
   <div class="bg-white shadow-md p-2 inline-block rounded-lg border border-gray-200 mt-6">
      <a href="#" class="watchDemo font-semibold transition-colors mb-10">
        <img src="/images/pomotto.jpg" alt="Timer" class="w-48 lg:w-64 mx-auto rounded-md" />
      </a>
     
   </div>

   <div class="order-1 lg:order-2 mt-5 flex flex-col items-center justify-center gap-4">
      <a href="#" class="watchDemo text-xl font-semibold transition-colors mb-5">
       Watch a demo â†’
     </a>
     <a href="https://apps.apple.com/us/app/pomotto/id6504365928?mt=12">
       <img src="/images/AppStoreDownload-LG.svg" alt="Download on the App Store" class="w-full max-w-64 mx-auto rounded-md text-shadow" />
     </a>
     150+ installations
   </div>

   <dialog id="videoDialog" class="w-full max-w-4xl p-4 rounded-lg backdrop:bg-gray-800/60">
     <div class="relative">
       <button 
         onclick="document.getElementById('videoDialog').close()"
         class="absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-lg hover:bg-gray-100"
       >
         <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
         </svg>
       </button>
       <video controls class="w-full rounded-lg">
         <source src="/videos/demo.mp4" type="video/mp4">
       </video>
     </div>
   </dialog>

   <div class="order-2 lg:order-1 mt-24 mb-8 w-full">
     <div class="grid grid-cols-1 sm:grid-cols-3 gap-8">
       <div class="feature-item bg-white p-4 rounded-lg max-w-xs mx-auto">
         <h4 class="text-xl font-semibold mb-2">Sound Reminders</h4>
         <p class="text-gray-700">Gentle, non-intrusive sounds pull you out of deep focus, ensuring smooth transitions between work and breaks</p>
       </div>
       <div class="feature-item bg-white p-4 rounded-lg max-w-xs mx-auto">
         <h4 class="text-xl font-semibold mb-2">Visual Cues</h4>
         <p class="text-gray-700">Subtle screen flashes mark session boundaries, keeping you on track without breaking your flow</p>
       </div>
       <div class="feature-item bg-white p-4 rounded-lg max-w-xs mx-auto">
         <h4 class="text-xl font-semibold mb-2">Do Not Disturb Integration</h4>
         <p class="text-gray-700">Leverage Mac's Do Not Disturb to block distractions while allowing critical notifications</p>
       </div>
     </div>
   </div>
 </div>

<section id="faq" class="py-12 w-5/6">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-8">Frequently Asked Questions</h2>
    <div class="max-w-4xl mx-auto space-y-4">
      
      {faqData.mainEntity.map((faq, index) => (
        <details class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden w-full">
          <summary class="flex justify-between items-center p-5 cursor-pointer focus:outline-none">
            <span class="text-lg font-medium">{faq.name}</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="p-5 border-t border-gray-100 text-gray-600">
            {faq.display.paragraphs.map((paragraph) => (
              <p class="text-left mb-4">{paragraph}</p>
            ))}
            
            {faq.display.bullets && (
              <ul class="text-left list-disc pl-8 space-y-2 mb-4">
                {faq.display.bullets.map((bullet) => (
                  <li>{bullet}</li>
                ))}
              </ul>
            )}
            
            {faq.display.links && (
              <p class="text-left">
                See <a href={faq.display.links[0].url} class="text-blue-600 hover:text-blue-800 font-medium">{faq.display.links[0].text}</a>.
              </p>
            )}
          </div>
        </details>
      ))}
      
    </div>
  </div>
</section>

</section>
